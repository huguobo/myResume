!function(E){E.fn.pagepiling=function(d){var v,i=E(this),u=0,e="ontouchstart"in window||0<navigator.msMaxTouchPoints,a=touchStartX=touchEndY=touchEndX=0,n=600;d=E.extend({direction:"vertical",menu:null,verticalCentered:!0,sectionsColor:[],anchors:[],scrollingSpeed:700,easing:"swing",loopBottom:!1,loopTop:!1,css3:!0,navigation:{textColor:"#000",bulletsColor:"#000",position:"right",tooltips:["section1","section2","section3","section4"]},normalScrollElements:null,normalScrollElementTouchThreshold:5,touchSensitivity:5,keyboardScrolling:!0,sectionSelector:".section",animateAnchor:!1,afterLoad:null,onLeave:null,afterRender:null},d),E.fn.pagepiling.setScrollingSpeed=function(n){d.scrollingSpeed=n},E.fn.pagepiling.setMouseWheelScrolling=function(n){n?i.get(0).addEventListener?(i.get(0).addEventListener("mousewheel",s,{passive:!1}),i.get(0).addEventListener("wheel",s,{passive:!1})):i.get(0).attachEvent("onmousewheel",s):i.get(0).addEventListener?(i.get(0).removeEventListener("mousewheel",s,!1),i.get(0).removeEventListener("wheel",s,!1)):i.get(0).detachEvent("onmousewheel",s)},E.fn.pagepiling.setAllowScrolling=function(n){n?(E.fn.pagepiling.setMouseWheelScrolling(!0),e&&(MSPointer=p(),i.off("touchstart "+MSPointer.down).on("touchstart "+MSPointer.down,w),i.off("touchmove "+MSPointer.move).on("touchmove "+MSPointer.move,x))):(E.fn.pagepiling.setMouseWheelScrolling(!1),e&&(MSPointer=p(),i.off("touchstart "+MSPointer.down),i.off("touchmove "+MSPointer.move)))},E.fn.pagepiling.setKeyboardScrolling=function(n){d.keyboardScrolling=n},E.fn.pagepiling.moveSectionUp=function(){var n=E(".pp-section.active").prev(".pp-section");!n.length&&d.loopTop&&(n=E(".pp-section").last()),n.length&&o(n)},E.fn.pagepiling.moveSectionDown=function(){var n=E(".pp-section.active").next(".pp-section");!n.length&&d.loopBottom&&(n=E(".pp-section").first()),n.length&&o(n)},E.fn.pagepiling.moveTo=function(n){var e="";0<(e=isNaN(n)?E('[data-anchor="'+n+'"]'):E(".pp-section").eq(n-1)).length&&o(e)},E(d.sectionSelector).each(function(){E(this).addClass("pp-section")}),d.css3&&(d.css3=function(){var n,e=document.createElement("p"),t={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var o in document.body.insertBefore(e,null),t)void 0!==e.style[o]&&(e.style[o]="translate3d(1px,1px,1px)",n=window.getComputedStyle(e).getPropertyValue(t[o]));return document.body.removeChild(e),void 0!==n&&0<n.length&&"none"!==n}()),E(i).css({overflow:"hidden","-ms-touch-action":"none","touch-action":"none"}),E.fn.pagepiling.setAllowScrolling(!0),E.isEmptyObject(d.navigation)||function(){E("body").append('<div id="pp-nav"><ul></ul></div>');var n=E("#pp-nav");n.css("color",d.navigation.textColor),n.addClass(d.navigation.position);for(var e=0;e<E(".pp-section").length;e++){var t="";if(d.anchors.length&&(t=d.anchors[e]),void 0!==d.navigation.tooltips){var o=d.navigation.tooltips[e];void 0===o&&(o="")}n.find("ul").append('<li data-tooltip="'+o+'"><a href="#'+t+'"><span></span></a></li>')}n.find("span").css("border-color",d.navigation.bulletsColor)}();var t=E(".pp-section").length;function o(n,e){var t,o,i={destination:n,animated:e,activeSection:E(".pp-section.active"),anchorLink:n.data("anchor"),sectionIndex:n.index(".pp-section"),toMove:n,yMovement:(t=n,o=E(".pp-section.active").index(".pp-section"),t.index(".pp-section")<o?"up":"down"),leavingSection:E(".pp-section.active").index(".pp-section")+1};if(!i.activeSection.is(n)){var a,c,s,r,l;void 0===i.animated&&(i.animated=!0),void 0!==i.anchorLink&&(a=i.anchorLink,d.anchors.length&&(location.hash=a)),i.destination.addClass("active").siblings().removeClass("active"),i.sectionsToMove=function(e){var n;n="down"===e.yMovement?E(".pp-section").map(function(n){if(n<e.destination.index(".pp-section"))return E(this)}):E(".pp-section").map(function(n){if(n>e.destination.index(".pp-section"))return E(this)});return n}(i),"down"===i.yMovement?(i.translate3d=M(),i.scrolling="-100%",d.css3||i.sectionsToMove.each(function(n){n!=i.activeSection.index(".pp-section")&&E(this).css(g(i.scrolling))}),i.animateSection=i.activeSection):(i.translate3d="translate3d(0px, 0px, 0px)",i.scrolling="0",i.animateSection=n),E.isFunction(d.onLeave)&&d.onLeave.call(this,i.leavingSection,i.sectionIndex+1,i.yMovement),c=i,d.css3?(m(c.animateSection,c.translate3d,c.animated),c.sectionsToMove.each(function(){m(E(this),c.translate3d,c.animated)}),setTimeout(function(){h(c)},d.scrollingSpeed)):(c.scrollOptions=g(c.scrolling),c.animated?c.animateSection.animate(c.scrollOptions,d.scrollingSpeed,d.easing,function(){f(c),h(c)}):(c.animateSection.css(g(c.scrolling)),setTimeout(function(){f(c),h(c)},400))),s=i.anchorLink,d.menu&&(E(d.menu).find(".active").removeClass("active"),E(d.menu).find('[data-menuanchor="'+s+'"]').addClass("active")),r=i.anchorLink,l=i.sectionIndex,d.navigation&&(E("#pp-nav").find(".active").removeClass("active"),r?E("#pp-nav").find('a[href="#'+r+'"]').addClass("active"):E("#pp-nav").find("li").eq(l).find("a").addClass("active")),v=i.anchorLink;var p=(new Date).getTime();u=p}}function h(n){E.isFunction(d.afterLoad)&&d.afterLoad.call(this,n.anchorLink,n.sectionIndex+1)}function f(e){var n;return"up"===e.yMovement&&(n=function(){e.sectionsToMove.each(function(n){E(this).css(g(e.scrolling))})}),n}function g(n){return"vertical"===d.direction?{top:n}:{left:n}}function c(){return(new Date).getTime()-u<n+d.scrollingSpeed}function m(n,e,t){var o;n.toggleClass("pp-easing",t),n.css({"-webkit-transform":o=e,"-moz-transform":o,"-ms-transform":o,transform:o})}function s(n){if(!c()){n=window.event||n;var e=Math.max(-1,Math.min(1,n.wheelDelta||-n.deltaY||-n.detail)),t=l(E(".pp-section.active"));return r(e<0?"down":"up",t),!1}}function r(n,e){if("down"==n)var t="bottom",o=E.fn.pagepiling.moveSectionDown;else t="top",o=E.fn.pagepiling.moveSectionUp;if(0<e.length){if(!isScrolled(t,e))return!0;o()}else o()}function l(n){return scrollable=n.find(".pp-scrollable"),scrollable}function p(){return window.PointerEvent?{down:"pointerdown",move:"pointermove",up:"pointerup"}:{down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp"}}function S(n){var e=new Array;return window.navigator.msPointerEnabled?(e.y=n.pageY,e.x=n.pageX):(e.y=n.touches[0].pageY,e.x=n.touches[0].pageX),e}function w(n){var e=S(n.originalEvent);a=e.y,touchStartX=e.x}function x(n){var e=n.originalEvent;if(!function n(e,t){t=t||0;var o=E(e).parent();return!!(t<d.normalScrollElementTouchThreshold&&o.is(d.normalScrollElements))||t!=d.normalScrollElementTouchThreshold&&n(o,++t)}(n.target)){n.preventDefault();var t=l(E(".pp-section.active"));if(!c()){var o=S(e);touchEndY=o.y,touchEndX=o.x,"horizontal"===d.direction&&Math.abs(touchStartX-touchEndX)>Math.abs(a-touchEndY)?Math.abs(touchStartX-touchEndX)>i.width()/100*d.touchSensitivity&&(touchStartX>touchEndX?r("down",t):touchEndX>touchStartX&&r("up",t)):Math.abs(a-touchEndY)>i.height()/100*d.touchSensitivity&&(a>touchEndY?r("down",t):touchEndY>a&&r("up",t))}}}function M(){return"vertical"!==d.direction?"translate3d(-100%, 0px, 0px)":"translate3d(0px, -100%, 0px)"}E(".pp-section").each(function(n){E(this).data("data-index",n),E(this).css("z-index",t),n||0!==E(".pp-section.active").length||E(this).addClass("active"),void 0!==d.anchors[n]&&E(this).attr("data-anchor",d.anchors[n]),void 0!==d.sectionsColor[n]&&E(this).css("background-color",d.sectionsColor[n]),d.verticalCentered&&E(this).addClass("pp-table").wrapInner('<div class="pp-tableCell" style="height:100%" />'),t-=1}).promise().done(function(){d.navigation&&(E("#pp-nav").css("margin-top","-"+E("#pp-nav").height()/2+"px"),E("#pp-nav").find("li").eq(E(".pp-section.active").index(".pp-section")).find("a").addClass("active")),E(window).on("load",function(){var n,e;n=window.location.hash.replace("#",""),0<(e=E('.pp-section[data-anchor="'+n+'"]')).length&&o(e,d.animateAnchor)}),E.isFunction(d.afterRender)&&d.afterRender.call(this)}),E(window).on("hashchange",function(){var n=window.location.hash.replace("#","").split("/")[0];if(n.length){if(n&&n!==v){if(isNaN(n))var e=E('[data-anchor="'+n+'"]');else var e=E(".pp-section").eq(n-1);o(e)}}}),E(document).keydown(function(n){if(d.keyboardScrolling&&!c())switch(n.which){case 38:case 33:E.fn.pagepiling.moveSectionUp();break;case 40:case 34:E.fn.pagepiling.moveSectionDown();break;case 36:E.fn.pagepiling.moveTo(1);break;case 35:E.fn.pagepiling.moveTo(E(".pp-section").length);break;case 37:E.fn.pagepiling.moveSectionUp();break;case 39:E.fn.pagepiling.moveSectionDown();break;default:return}}),d.normalScrollElements&&(E(document).on("mouseenter",d.normalScrollElements,function(){E.fn.pagepiling.setMouseWheelScrolling(!1)}),E(document).on("mouseleave",d.normalScrollElements,function(){E.fn.pagepiling.setMouseWheelScrolling(!0)})),E(document).on("click touchstart","#pp-nav a",function(n){n.preventDefault();var e=E(this).parent().index();o(E(".pp-section").eq(e))}),E(document).on({mouseenter:function(){var n=E(this).data("tooltip");E('<div class="pp-tooltip '+d.navigation.position+'">'+n+"</div>").hide().appendTo(E(this)).fadeIn(200)},mouseleave:function(){E(this).find(".pp-tooltip").fadeOut(200,function(){E(this).remove()})}},"#pp-nav li")}}(jQuery);